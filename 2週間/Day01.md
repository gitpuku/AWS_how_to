# Day01: AWS の最初にやっておきたいこと

## 概要

AWS アカウント作成後に実施すべき重要な初期設定について学習します。

## 学習目標

- IAM ユーザーの作成と設定
- セキュリティ設定（CloudTrail、GuardDuty）の有効化
- 料金アラートの設定

---

## 1. ルートユーザーと IAM ユーザーについて

### ルートユーザー

- すべての AWS サービス、すべての操作が可能な特権ユーザー
- アカウント全体の設定（サポートプラン変更など）に必要
- 普段使いには推奨されない（権限が強すぎるため）

### IAM ユーザー

- IAM ポリシーがアタッチされたユーザー
- 許可された AWS サービスの操作のみを実行可能
- 利用者ごとに作成して使用する
- 必要最小限の権限を付与するのが基本原則

---

## 2. IAM ユーザーの作成

### 前提条件

- AWS アカウントの作成が完了していること
- ルートユーザーで AWS マネジメントコンソールにログインしていること

### 手順

#### 2.1 基本設定の確認

1. AWS マネジメントコンソールにログイン
2. 右上の設定（歯車マーク）から言語を「日本語」に設定
3. 右上のリージョンを「東京」に設定

#### 2.2 IAM サービスへのアクセス

1. 左上の検索窓に「IAM」と入力
2. IAM サービスをクリック

#### 2.3 MFA の設定（推奨）

- ルートユーザーに多要素認証（MFA）を設定することを強く推奨
- セキュリティのベストプラクティス

#### 2.4 IAM ユーザーの作成

1. 左側メニューから「ユーザー」をクリック
2. 右上の「ユーザーを作成」をクリック
3. ユーザー名を入力（例：udemy-aws-14days）
4. 「マネジメントコンソールへのユーザーアクセスを提供する」にチェック
5. 「IAM ユーザーを作成します」を選択
6. 「カスタムパスワード」を選択してパスワードを設定
7. 「ユーザーは次回サインイン時に新しいパスワードを作成する必要があります」のチェックを外す
8. 「次へ」をクリック

#### 2.5 権限の設定

1. 「ポリシーを直接アタッチする」を選択
2. 「AdministratorAccess」を検索して選択
   - **注意**: ハンズオン用のため管理者権限を付与。本番環境では必要最小限の権限を付与すること
3. 「次へ」をクリック
4. 「ユーザーを作成」をクリック

#### 2.6 エイリアスの設定

1. 「ユーザーリストに戻る」をクリック
2. 左側メニューから「ダッシュボード」をクリック
3. アカウントエイリアスの「作成」をクリック
4. エイリアス名を入力（例：aws-14days-labs）
5. 「エイリアスを作成」をクリック

#### 2.7 IAM ユーザーでのログイン

1. ルートユーザーからサインアウト
2. IAM ユーザー用のサインイン URL にアクセス
3. 作成した IAM ユーザーの認証情報でログイン

**重要**: 今後の学習はこの IAM ユーザーで実施します。以下の情報を記録してください：

- IAM ユーザー用サインイン URL
- ユーザー名
- パスワード

---

## 3. セキュリティ設定

### 3.1 AWS CloudTrail の設定

#### 目的

- AWS 操作ログの自動取得
- デフォルトでは 90 日分のみ保存
- 長期保存のために S3 バケットに保存

#### 手順

1. 検索窓に「CloudTrail」と入力してサービスにアクセス
2. 左側メニューから「イベント履歴」をクリック
3. 必要に応じて「フィルターをクリア」をクリック
4. 左上の「CloudTrail」リンクをクリック
5. 「証跡の作成」をクリック
6. 証跡名を入力（例：cloudtrail-logs）
7. 新しい S3 バケットを作成（デフォルト設定）
8. ログファイルの暗号化は無効のまま
9. 「次へ」をクリック
10. イベントタイプは「管理イベント」のみ選択
11. 「次へ」をクリック
12. 「証跡を作成」をクリック

### 3.2 Amazon GuardDuty の設定

#### 目的

- 脅威検出サービス
- 不審なアクティビティの検知・通知
- AWS 環境の安全な利用に必須

#### 手順

1. 検索窓に「GuardDuty」と入力してサービスにアクセス
2. 「今すぐ始める」をクリック
3. すべての機能を有効のまま「GuardDuty を有効にする」をクリック
4. 設定完了

---

## 4. 料金関連の設定

### 4.1 AWS 料金の基本的な考え方

#### 重要なポイント

1. **従量課金制**: 使った分だけの支払い
2. **最新料金の確認**: 公式サイトで最新情報を確認
3. **無料利用枠**: 新規アカウントには 12 ヶ月間の無料枠あり

#### 料金確認方法

- 「EC2 料金」などで Google 検索
- AWS 公式の料金ページで確認
- AWS Pricing Calculator で見積もり作成

### 4.2 料金アラートの設定

#### 目的

- 予期しない料金発生の早期発見
- リソース削除忘れの防止

#### 手順

1. AWS マネジメントコンソールのトップページ
2. 「コストと使用状況」セクションの「Billing and Cost Management に移動」をクリック
3. 「予算」セクションの「設定が必要です」をクリック
4. 予算タイプ：「テンプレートを使用」のまま
5. 「月次コスト予算」を選択
6. 予算名：デフォルトのまま
7. 予算額：適切な金額を設定（例：$10）
   - 参考：このコースの想定費用は約$20（ドメイン取得$15 含む）
8. 通知用メールアドレスを入力
9. 「予算を作成」をクリック

---

## 5. 確認事項

### 設定完了チェックリスト

- [ ] IAM ユーザーの作成
- [ ] IAM ユーザーでのログイン確認
- [ ] CloudTrail の有効化
- [ ] GuardDuty の有効化
- [ ] 料金アラートの設定

### 記録すべき情報

- [ ] IAM ユーザー用サインイン URL
- [ ] IAM ユーザー名
- [ ] IAM ユーザーパスワード

---

## 6. 次のステップ

1. **Day02**: EC2 インスタンスの起動
2. 今後の学習は作成した IAM ユーザーで実施
3. ルートユーザーは特別な設定変更時のみ使用

---

## 注意事項

### セキュリティ

- ルートユーザーには MFA を設定すること
- IAM ユーザーには必要最小限の権限のみ付与すること（本コースはハンズオン用のため管理者権限を使用）

### 料金

- 使用しないリソースは必ず削除すること
- 料金アラートを設定して予期しない課金を防ぐこと
- 無料利用枠の条件を確認すること

### リージョン

- 基本的に東京リージョンを使用すること
- 作業前にリージョンが正しく設定されているか確認すること
